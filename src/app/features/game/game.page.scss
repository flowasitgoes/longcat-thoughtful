.loading-container,
.error-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px;
  text-align: center;
  height: 100%;
  
  ion-spinner {
    margin-bottom: 20px;
  }
  
  p {
    color: var(--ion-color-medium);
  }
}

.game-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 10px;
  min-height: 100%;
  // é˜²æ­¢é¡µé¢æ»šåŠ¨
  overflow: hidden;
  // ç¡®ä¿å†…å®¹ä¸ä¼šè¶…å‡ºè§†å£
  max-width: 100%;
  box-sizing: border-box;
}

.game-info {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  justify-content: center;
  flex-wrap: wrap;
  width: 100%;
}

.game-grid-wrapper {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-shrink: 0;
}

.game-grid {
  display: grid;
  gap: 2px;
  background-color: var(--ion-color-dark);
  padding: 2px;
  border-radius: 8px;
  width: 100%;
  // æ¡Œé¢ç«¯ï¼šæœ€å¤§ 500px
  max-width: min(90vw, 500px);
  margin: 0 auto;
  // ç¦ç”¨è§¦æ‘¸æ»šåŠ¨ï¼Œå…è®¸è§¦æ‘¸äº‹ä»¶
  touch-action: none;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  // ç¡®ä¿å¯ä»¥æ¥æ”¶è§¦æ‘¸äº‹ä»¶
  pointer-events: auto;
  // ç¡®ä¿ç½‘æ ¼ä¸ä¼šè¶…å‡ºå®¹å™¨
  box-sizing: border-box;
  
  // ç§»åŠ¨ç«¯ï¼šé™åˆ¶æœ€å¤§å®½åº¦ï¼Œç¡®ä¿æŒ‰é’®åŒºåŸŸæœ‰è¶³å¤Ÿç©ºé—´
  @media (max-width: 767px) {
    max-width: min(85vw, 350px);
    // ç¡®ä¿ç½‘æ ¼ä¸ä¼šå¤ªé«˜ï¼Œä¸ºæŒ‰é’®ç•™å‡ºç©ºé—´
    max-height: 50vh;
  }
}

.game-cell {
  border-radius: 4px;
  transition: background-color 0.2s;
  min-width: 0;
  min-height: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  // ç¡®ä¿å•å…ƒæ ¼æ˜¯æ­£æ–¹å½¢
  aspect-ratio: 1;
  // ç¡®ä¿å¯ä»¥æ¥æ”¶è§¦æ‘¸äº‹ä»¶
  touch-action: none;
  pointer-events: auto;
  // é˜²æ­¢æ–‡æœ¬é€‰æ‹©
  -webkit-user-select: none;
  user-select: none;
  // ç¡®ä¿å•å…ƒæ ¼ä¸ä¼šæº¢å‡º
  overflow: hidden;
}

.cell-wall {
  background-color: var(--ion-color-wall);
}

.cell-empty {
  background-color: var(--ion-color-empty);
  border: 1px solid var(--ion-color-light-shade);
}

.cell-visited {
  background-color: var(--ion-color-light);
}

.cell-cat-body {
  background-color: var(--ion-color-cat);
  opacity: 0.7;
}

.cell-cat-head {
  background-color: var(--ion-color-cat);
  position: relative;
  font-size: 1.2em;
  
  &::after {
    content: 'ğŸ±';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 1.5em;
    z-index: 1;
  }
}

.game-message {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
  width: 90%;
  max-width: 400px;
}

// ç¦ç”¨ ion-content çš„æ»šåŠ¨
:host {
  display: block;
  height: 100%;
  
  ion-content {
    --overflow: hidden;
    --offset-bottom: 0;
    --offset-end: 0;
    --offset-start: 0;
    --offset-top: 0;
    overflow: hidden;
    touch-action: none;
    
    // ç§»åŠ¨ç«¯å®Œå…¨ç¦ç”¨æ»šåŠ¨
    @media (max-width: 767px) {
      --overflow: hidden;
      overflow: hidden !important;
      touch-action: none !important;
    }
  }
  
  // æ¸¸æˆå®¹å™¨åŒºåŸŸå®Œå…¨ç¦ç”¨æ»šåŠ¨
  .game-container {
    touch-action: none;
    overflow: hidden;
    overscroll-behavior: none;
    -webkit-overflow-scrolling: auto;
  }
}

// æ–¹å‘æ§åˆ¶æŒ‰é’®
.direction-controls {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  margin-top: 15px;
  padding: 10px;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  
  .control-row {
    display: flex;
    gap: 8px;
    justify-content: center;
    align-items: center;
    width: 100%;
    flex-wrap: nowrap;
  }
  
  .control-button {
    --padding-start: 16px;
    --padding-end: 16px;
    --padding-top: 16px;
    --padding-bottom: 16px;
    min-width: 50px;
    min-height: 50px;
    max-width: 80px;
    max-height: 80px;
    flex: 0 0 auto;
    font-size: 20px;
    
    ion-icon {
      font-size: 24px;
    }
  }
}

// ç§»åŠ¨ç«¯ä¼˜åŒ–
@media (max-width: 767px) {
  :host {
    touch-action: none;
    overflow: hidden;
    height: 100%;
  }
  
  .game-container {
    padding: 8px;
    // ç¡®ä¿å®¹å™¨ä¸ä¼šè¶…å‡ºè§†å£
    max-height: 100vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  .game-info {
    margin-bottom: 10px;
    flex-wrap: wrap;
    
    ion-chip {
      font-size: 12px;
      --padding-start: 8px;
      --padding-end: 8px;
    }
  }
  
  .game-grid {
    // ç§»åŠ¨ç«¯ï¼šæ›´å°çš„æœ€å¤§å®½åº¦ï¼Œç¡®ä¿æœ‰ç©ºé—´æ˜¾ç¤ºæŒ‰é’®
    max-width: min(85vw, 320px);
    // é™åˆ¶é«˜åº¦ï¼Œç¡®ä¿æŒ‰é’®åŒºåŸŸå¯è§
    max-height: calc(50vh - 100px);
    // ç¡®ä¿ç½‘æ ¼ä¿æŒæ­£æ–¹å½¢æ¯”ä¾‹
    aspect-ratio: 1;
  }
  
  .direction-controls {
    margin-top: 10px;
    padding: 8px;
    gap: 6px;
    // ç¡®ä¿æŒ‰é’®åŒºåŸŸä¸ä¼šè¶…å‡ºå±å¹•
    max-width: 100%;
    
    .control-row {
      gap: 6px;
      max-width: 100%;
    }
    
    .control-button {
      min-width: 55px;
      min-height: 55px;
      max-width: 70px;
      max-height: 70px;
      --padding-start: 12px;
      --padding-end: 12px;
      --padding-top: 12px;
      --padding-bottom: 12px;
      
      ion-icon {
        font-size: 26px;
      }
    }
  }
}

// å°å±å¹•æ‰‹æœºä¼˜åŒ–
@media (max-width: 480px) {
  .game-grid {
    max-width: min(90vw, 280px);
    max-height: calc(45vh - 120px);
  }
  
  .direction-controls {
    .control-button {
      min-width: 50px;
      min-height: 50px;
      max-width: 65px;
      max-height: 65px;
      
      ion-icon {
        font-size: 24px;
      }
    }
  }
}

